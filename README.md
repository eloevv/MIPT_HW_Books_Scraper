# Books Scraper

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö –æ –∫–Ω–∏–≥–∞—Ö —Å —Å–∞–π—Ç–∞ [Books to Scrape](https://books.toscrape.com/). –°–∫—Ä–∏–ø—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –∫–Ω–∏–≥–∞—Ö –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞, –≤–∫–ª—é—á–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω—É, —Ä–µ–π—Ç–∏–Ω–≥, –Ω–∞–ª–∏—á–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.

### –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ –∫–Ω–∏–≥–∞—Ö —Å –≤–µ–±-—Å–∞–π—Ç–∞ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–∞–≤—ã–∫–∏ –≤–µ–±-—Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞, —Ä–∞–±–æ—Ç—ã —Å HTML, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- üìñ –ü–∞—Ä—Å–∏–Ω–≥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–Ω–∏–≥–µ
- üìö –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ –≤—Å–µ—Ö –∫–Ω–∏–≥–∞—Ö –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª (JSON —Ñ–æ—Ä–º–∞—Ç)
- ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd MIPT_HW_Books_Scraper
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```bash
python -m venv venv
source venv/bin/activate  # –¥–ª—è Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # –¥–ª—è Windows
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **requests** (2.31.0+) - –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- **beautifulsoup4** (4.12.0+) - –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **schedule** (1.2.0+) - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- **pytest** (7.4.0+) - –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–π –∫–Ω–∏–≥–∏

```python
from scraper import get_book_data

url = "http://books.toscrape.com/catalogue/a-light-in-the-attic_1000/index.html"
book_data = get_book_data(url)
print(book_data)
```

### 2. –ü–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö –∫–Ω–∏–≥ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞

```python
from scraper import scrape_books

# –ë–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
books = scrape_books(is_save=False)

# –° —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ —Ñ–∞–π–ª books_data.txt
books = scrape_books(is_save=True)

# –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
books = scrape_books(is_save=True, max_pages=2)
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

```python
from scraper import run_scheduler, test_scheduler

# –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 19:00
run_scheduler(schedule_time="19:00")
```

### 4. –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
python scraper.py
```


## –°–æ–±–∏—Ä–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

- **title** - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
- **price** - —Ü–µ–Ω–∞
- **rating** - —Ä–µ–π—Ç–∏–Ω–≥ (–æ—Ç One –¥–æ Five)
- **availability** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞–ª–∏—á–∏–∏
- **description** - –æ–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
- **product_info** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
  - UPC (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–¥—É–∫—Ç–∞)
  - Product Type (—Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞)
  - Price (excl. tax) (—Ü–µ–Ω–∞ –±–µ–∑ –Ω–∞–ª–æ–≥–∞)
  - Price (incl. tax) (—Ü–µ–Ω–∞ —Å –Ω–∞–ª–æ–≥–æ–º)
  - Tax (–Ω–∞–ª–æ–≥)
  - Number of reviews (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤)

## –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `books_data.txt` –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:

```json
[
  {
    "title": "A Light in the Attic",
    "price": "¬£51.77",
    "rating": "Three",
    "availability": "In stock (22 available)",
    "description": "It's hard to imagine a world without...",
    "product_info": {
      "UPC": "a897fe39b1053632",
      "Product Type": "Books",
      "Price (excl. tax)": "¬£51.77",
      "Price (incl. tax)": "¬£51.77",
      "Tax": "¬£0.00",
      "Number of reviews": "0"
    }
  },
  ...
]
```

